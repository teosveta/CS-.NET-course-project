/*
 * ============================================================================
 * БИБЛИОТЕЧНА СИСТЕМА - Клас за електронна книга
 * ============================================================================
 * 
 * Проект по "Основи на програмиране на приложения с Microsoft Visual C# .NET"
 * 
 * Автор: Теосвета Красимирова Велкова
 * Факултетен номер: F108355
 * 
 * Дата на създаване: 2025
 * 
 * Описание на файла:
 * Този файл съдържа дефиницията на класа EBook (Електронна книга).
 * EBook наследява базовия клас Book и добавя допълнителни свойства.
 * 
 * ООП Концепции в този клас:
 * 1. НАСЛЕДЯВАНЕ (Inheritance) - EBook наследява Book
 * 2. ПОЛИМОРФИЗЪМ - презаписване на метода GetInfo() с override
 * 3. РАЗШИРЯВАНЕ - добавяне на нови свойства (FileSizeMB, Format)
 * 
 * ============================================================================
 */

using System;

namespace LibraryProject
{
    /// <summary>
    /// Клас EBook - представя електронна книга в библиотеката.
    /// 
    /// ООП Концепция: НАСЛЕДЯВАНЕ (Inheritance)
    /// - EBook наследява всички свойства и методи от Book
    /// - Синтаксис: class EBook : Book
    /// - Двоеточието (:) показва, че EBook наследява Book
    /// - EBook е НАСЛЕДНИК (derived/child class)
    /// - Book е БАЗОВ КЛАС (base/parent class)
    /// 
    /// Какво наследява EBook от Book:
    /// - Свойства: Title, Author, Year, IsBorrowed, BorrowerName
    /// - Методи: Borrow(), Return(), GetInfo(), ToString()
    /// - Имплементация на IBorrowable интерфейса
    /// </summary>
    public class EBook : Book
    {
        /*
         * ========================================
         * ДОПЪЛНИТЕЛНИ СВОЙСТВА
         * ========================================
         * 
         * Тези свойства са СПЕЦИФИЧНИ за електронните книги
         * и НЕ съществуват в базовия клас Book.
         * Това демонстрира как наследяването позволява РАЗШИРЯВАНЕ на функционалността.
         */

        /// <summary>
        /// Размер на файла на електронната книга в мегабайти (MB).
        /// Пример: 5.2, 10.0, 3.5
        /// </summary>
        public double FileSizeMB { get; set; }

        /// <summary>
        /// Формат на електронната книга.
        /// Примери: "PDF", "EPUB", "MOBI"
        /// </summary>
        public string Format { get; set; }

        /*
         * ========================================
         * КОНСТРУКТОР
         * ========================================
         * 
         * ООП Концепция: ИЗВИКВАНЕ НА БАЗОВИЯ КОНСТРУКТОР
         * - Ключовата дума "base" се използва за извикване на конструктора
         *   на базовия клас (Book)
         * - Синтаксис: : base(параметри)
         * - Първо се изпълнява конструкторът на базовия клас,
         *   след това кодът в текущия конструктор
         */

        /// <summary>
        /// Конструктор на класа EBook.
        /// Създава нов обект от тип EBook с посочените параметри.
        /// </summary>
        /// <param name="title">Заглавие на книгата</param>
        /// <param name="author">Автор на книгата</param>
        /// <param name="year">Година на издаване</param>
        /// <param name="fileSizeMB">Размер на файла в MB</param>
        /// <param name="format">Формат на файла (PDF, EPUB, MOBI)</param>
        public EBook(string title, string author, int year, double fileSizeMB, string format)
            : base(title, author, year)  // Извикваме конструктора на Book
        {
            // Инициализираме допълнителните свойства, специфични за EBook
            FileSizeMB = fileSizeMB;
            Format = format;
        }

        /*
         * ========================================
         * ПРЕЗАПИСАНИ МЕТОДИ (Override)
         * ========================================
         * 
         * ООП Концепция: ПОЛИМОРФИЗЪМ
         * - Ключовата дума "override" показва, че презаписваме виртуален метод
         *   от базовия клас
         * - Методът GetInfo() в Book е маркиран като "virtual"
         * - Тук го презаписваме с "override" за да добавим информация
         *   специфична за електронните книги
         * - Това е пример за "един интерфейс - множество реализации"
         */

        /// <summary>
        /// Презаписан метод за получаване на информация за електронната книга.
        /// 
        /// Разликата с базовия метод:
        /// - Добавя етикет "[E-Book]" в началото
        /// - Показва размера на файла в MB
        /// - Показва формата на файла (PDF, EPUB, MOBI)
        /// </summary>
        /// <returns>Форматиран текст с информация за електронната книга</returns>
        public override string GetInfo()
        {
            // Определяме статуса на книгата
            string status;
            if (IsBorrowed)
            {
                status = "(Заета от " + BorrowerName + ")";
            }
            else
            {
                status = "(Налична)";
            }

            // Връщаме форматиран текст с допълнителна информация за e-book
            // Форматът е: [E-Book] Заглавие - Автор (Година) - РазмерMB, Формат (Статус)
            return "[E-Book] " + Title + " - " + Author + " (" + Year + ") - " 
                   + FileSizeMB + "MB, " + Format + " " + status;
        }
    }
}
